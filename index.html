<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
<title>ה' שבט תשפ"ו</title>
    <meta property="og:title" content="השם החדש של המשחק שלך">
    <meta property="og:description" content="משחק חידות אינטראקטיבי ליובל של הלל">
    <meta property="og:image" content="1.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        #game-container {
            width: 100%; height: 100%;
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: background-image 0.5s ease-in-out;
        }
        /* שכבת הגנה שבלחיצה עליה נפתח התפריט */
        #click-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
        }
        .modal {
            display: none; position: fixed; z-index: 10;
            left: 50%; top: 50%; transform: translate(-50%, -50%);
            width: 85%; max-width: 400px; background: rgba(255, 255, 255, 0.95);
            padding: 20px; border-radius: 15px; box-shadow: 0 5px 30px rgba(0,0,0,0.3);
            text-align: center;
        }
        input[type="text"] {
            width: 90%; padding: 10px; margin: 10px 0;
            border: 2px solid #ddd; border-radius: 8px; font-size: 16px;
        }
        button {
            width: 95%; padding: 12px; margin: 5px 0;
            border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px;
        }
        .btn-check { background-color: #4CAF50; color: white; }
        .btn-hint { background-color: #2196F3; color: white; }
        .btn-skip { background-color: #f44336; color: white; }
        .btn-next { background-color: #FF9800; color: white; }
        
        #score-display {
            position: absolute; top: 10px; right: 10px;
            background: rgba(0,0,0,0.6); color: white;
            padding: 5px 15px; border-radius: 20px; z-index: 5;
        }
    </style>
</head>
<body>

<div id="score-display">ניקוד מצטבר: <span id="total-score">0</span></div>

<div id="game-container">
    <div id="click-overlay" onclick="openMenu()"></div>
</div>

<div id="menu-modal" class="modal">
    <h2 id="riddle-title">חידה</h2>
    <input type="text" id="answer-input" placeholder="הקלידו את הפתרון...">
    <button class="btn-check" onclick="checkAnswer()">בדיקת פתרון</button>
    <button class="btn-hint" id="hint-btn" onclick="showHint()">צריך רמז? (2- נקודות)</button>
    <button class="btn-skip" onclick="skipRiddle()">התייאשתי, דלג שלב</button>
    <button style="background:#888; color:white;" onclick="closeModals()">חזור לחידה</button>
</div>

<div id="explanation-modal" class="modal">
    <h2 id="exp-status">כל הכבוד!</h2>
    <p id="exp-text"></p>
    <p><strong>ניקוד על החידה:</strong> <span id="riddle-points">0</span></p>
    <button class="btn-next" onclick="nextRiddle()">לחידה הבאה</button>
</div>

<script>
    const riddles = [
        {
            id: 1, image: '1.png', answer: 'בארות יצחק',
            hints: ['האותיות "קח את ציבור" הן אותיות התשובה', 'שם מקום (אנחנו בעשור הראשון)'],
            explanation: "בארות יצחק = אותיות 'קח את ציבור'"
        },
        {
            id: 2, image: '2.png', answer: 'עתניאל',
            hints: ['157 זה לא מספר אלא אותיות', 'לאן הגיע הילל בגיל ח"י?'],
            explanation: "עתניאל (בן קנז בגימטריה = 157)"
        },
        {
            id: 3, image: '3.png', answer: 'אוריה',
            hints: ['אריה = לביא', 'כל מילה רומזת לאחד הילדים. מי חסרה?'],
            explanation: "אריה=לביא, נווה=מקדש=הראל, תרם=נדב, שבח=תהילה."
        },
        {
            id: 4, image: '4.png', answer: 'אמדוקס',
            hints: ['מה קרה ללוגו?', 'מקום עבודה.'],
            explanation: "כל אות זזה חמש מקומות קדימה (צופן קיסר)."
        },
        {
            id: 5, image: '5.png', answer: 'הדף השבועי',
            hints: ['פרויקט שעובד בשבת.', 'זה לא הדף היומי.'],
            explanation: "הדף השבועי נמשך כחמישים שנה, וכרגע לומדים מסכת שקלים."
        }
    ];

    let currentIdx = 0;
    let totalScore = 0;
    let currentRiddlePoints = 10;
    let hintsUsed = 0;

    function initGame() {
        loadRiddle();
    }

    function loadRiddle() {
        const riddle = riddles[currentIdx];
        document.getElementById('game-container').style.backgroundImage = `url('${riddle.image}')`;
        document.getElementById('riddle-title').innerText = `חידה ${riddle.id}`;
        document.getElementById('answer-input').value = '';
        currentRiddlePoints = 10;
        hintsUsed = 0;
        document.getElementById('hint-btn').innerText = "צריך רמז? (2- נקודות)";
    }

    function openMenu() {
        document.getElementById('menu-modal').style.display = 'block';
    }

    function closeModals() {
        document.querySelectorAll('.modal').forEach(m => m.style.display = 'none');
    }

    function showHint() {
        const riddle = riddles[currentIdx];
        if (hintsUsed < riddle.hints.length) {
            alert("רמז: " + riddle.hints[hintsUsed]);
            hintsUsed++;
            currentRiddlePoints -= 2;
            if (hintsUsed === riddle.hints.length) {
                document.getElementById('hint-btn').innerText = "אין רמזים נוספים";
            }
        }
    }

    function checkAnswer() {
        const userAns = document.getElementById('answer-input').value.trim();
        const correctAns = riddles[currentIdx].answer;
        
        if (userAns === correctAns) {
            showExplanation("כל הכבוד!", currentRiddlePoints);
        } else {
            alert("תשובה לא נכונה, נסו שוב.");
        }
    }

    function skipRiddle() {
        showExplanation("דילגת על החידה", 0);
    }

    function showExplanation(status, points) {
        closeModals();
        totalScore += points;
        document.getElementById('total-score').innerText = totalScore;
        document.getElementById('exp-status').innerText = status;
        document.getElementById('exp-text').innerText = riddles[currentIdx].explanation;
        document.getElementById('riddle-points').innerText = points;
        document.getElementById('explanation-modal').style.display = 'block';
    }

 function nextRiddle() {
        currentIdx++;
        closeModals();
        if (currentIdx < riddles.length) {
            loadRiddle();
        } else {
            // הצגת תמונת הסיום
            document.getElementById('game-container').style.backgroundImage = "url('6.png')";
            
            // הצגת הודעת סיכום סופית
            setTimeout(() => {
                document.getElementById('exp-status').innerText = "אלוף! סיימת את המשחק";
                document.getElementById('exp-text').innerText = `הצבת רף גבוה עם ניקוד סופי של ${totalScore} נקודות!`;
                document.getElementById('riddle-points').parentElement.style.display = 'none'; // הסתרת שורת הניקוד של החידה האחרונה
                
                const nextBtn = document.querySelector('.btn-next');
                nextBtn.innerText = "שחק שוב";
                nextBtn.onclick = () => location.reload();
                
                document.getElementById('explanation-modal').style.display = 'block';
            }, 500);
        }
    }

    window.onload = initGame;
</script>

</body>

</html>

