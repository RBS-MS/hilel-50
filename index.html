<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>מי כאן הילל?</title>
    <meta property="og:title" content="מי כאן הילל?">
    <meta property="og:description" content="משחק חידות לכבוד יום הולדת 50">
    <meta property="og:image" content="1.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #000;
        }
        #game-container {
            width: 100%; height: 100%;
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: flex-end; align-items: center;
            transition: background-image 0.5s ease-in-out;
        }
        /* שכבת הלחיצה - כרגע על כל המסך, נצמצם אותה לשליש התחתון רק בעמוד הפתיחה */
        #click-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; z-index: 1;
        }
        /* כפתור התחל ייחודי לעמוד הפתיחה */
        #start-btn {
            display: none; position: relative; z-index: 2; margin-bottom: 50px;
            padding: 15px 40px; font-size: 24px; background-color: #4CAF50; color: white;
            border: none; border-radius: 50px; cursor: pointer; font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .modal {
            display: none; position: fixed; z-index: 10;
            left: 50%; top: 50%; transform: translate(-50%, -50%);
            width: 85%; max-width: 400px; background: rgba(255, 255, 255, 0.98);
            padding: 20px; border-radius: 15px; box-shadow: 0 5px 30px rgba(0,0,0,0.5);
            text-align: center;
        }
        input[type="text"] {
            width: 90%; padding: 12px; margin: 10px 0;
            border: 2px solid #ddd; border-radius: 8px; font-size: 18px; text-align: center;
        }
        button {
            width: 95%; padding: 12px; margin: 5px 0;
            border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px;
        }
        .btn-check { background-color: #4CAF50; color: white; }
        .btn-hint { background-color: #2196F3; color: white; }
        .btn-skip { background-color: #f44336; color: white; }
        .btn-next { background-color: #FF9800; color: white; }
    </style>
</head>
<body>

<div id="game-container">
    <button id="start-btn" onclick="startFirstRiddle()">התחל משחק</button>
    <div id="click-overlay" onclick="openMenu()"></div>
</div>

<div id="menu-modal" class="modal">
    <h2 id="riddle-title">חידה</h2>
    <input type="text" id="answer-input" placeholder="הקלידו את הפתרון...">
    <button class="btn-check" onclick="checkAnswer()">בדיקת פתרון</button>
    <button class="btn-hint" id="hint-btn" onclick="showHint()">צריך רמז? (2- נקודות)</button>
    <button class="btn-skip" onclick="skipRiddle()">התייאשתי, דלג שלב</button>
    <button style="background:#888; color:white;" onclick="closeModals()">חזור לחידה</button>
</div>

<div id="explanation-modal" class="modal">
    <h2 id="exp-status">כל הכבוד!</h2>
    <p id="exp-text"></p>
    <hr id="score-hr">
    <p id="p-riddle-score"><strong>ניקוד על החידה:</strong> <span id="riddle-points">0</span></p>
    <p id="p-total-score"><strong>סה"כ ניקוד מצטבר:</strong> <span id="accumulated-score">0</span></p>
    <button class="btn-next" id="next-btn-text" onclick="nextRiddle()">לחידה הבאה</button>
</div>

<script>
    const riddles = [
        {
            id: 1, image: '1.png', answer: 'בארות יצחק',
            hints: ['האותיות "קח את ציבור" הן אותיות התשובה', 'שם מקום (אנחנו בעשור הראשון)'],
            explanation: "בארות יצחק = אותיות 'קח את ציבור'"
        },
        // ... שאר החידות שלך נשארות כרגיל
        { id: 2, image: '2.png', answer: 'עתניאל', hints: ['157 זה לא מספר אלא אותיות', 'לאן הגיע הילל בגיל ח"י?'], explanation: "עתניאל (בן קנז בגימטריה = 157)" },
        { id: 3, image: '3.png', answer: 'אוריה', hints: ['אריה = לביא', 'כל מילה רומזת לאחד הילדים. מי חסר?'], explanation: "אריה=לביא, נווה=מקדש=הראל, תרם=נדב, שבח=תהילה." },
        { id: 4, image: '4.png', answer: 'אמדוקס', hints: ['מה קרה ללוגו?', 'מקום עבודה.'], explanation: "אמדוקס - כל אות זזה מקום אחד קדימה." },
        { id: 5, image: '5.png', answer: 'הדף השבועי', hints: ['פרויקט שעובד בשבת.', 'זה לא הדף היומי.'], explanation: "הדף השבועי נמשך כחמישים שנה, וכרגע לומדים מסכת שקלים." }
    ];

    let currentIdx = -1; // מתחילים במינוס 1 כדי להציג את עמוד הפתיחה
    let totalScore = 0;
    let currentRiddlePoints = 10;
    let hintsUsed = 0;

    function initGame() {
        showLandingPage();
    }

    // פונקציה חדשה לעמוד הפתיחה
    function showLandingPage() {
        document.getElementById('game-container').style.backgroundImage = "url('0.png')";
        document.getElementById('start-btn').style.display = 'block';
        
        // הגבלת אזור הלחיצה רק לשליש התחתון בעמוד הפתיחה
        const overlay = document.getElementById('click-overlay');
        overlay.style.height = '33%'; 
        overlay.onclick = null; // מנטרל את פתיחת התפריט בעמוד הפתיחה
    }

    function startFirstRiddle() {
        document.getElementById('start-btn').style.display = 'none';
        
        // החזרת אזור הלחיצה לכל המסך עבור המשחק
        const overlay = document.getElementById('click-overlay');
        overlay.style.height = '100%';
        overlay.onclick = openMenu;
        
        currentIdx = 0;
        loadRiddle();
    }

    function loadRiddle() {
        const riddle = riddles[currentIdx];
        document.getElementById('game-container').style.backgroundImage = `url('${riddle.image}')`;
        document.getElementById('riddle-title').innerText = `חידה ${riddle.id}`;
        document.getElementById('answer-input').value = '';
        currentRiddlePoints = 10;
        hintsUsed = 0;
        document.getElementById('hint-btn').innerText = "צריך רמז? (2- נקודות)";
    }

    function openMenu() {
        document.getElementById('menu-modal').style.display = 'block';
    }

    function closeModals() {
        document.getElementById('menu-modal').style.display = 'none';
        document.getElementById('explanation-modal').style.display = 'none';
    }

    function showHint() {
        const riddle = riddles[currentIdx];
        if (hintsUsed < riddle.hints.length) {
            alert("רמז: " + riddle.hints[hintsUsed]);
            hintsUsed++;
            currentRiddlePoints -= 2;
            if (hintsUsed === riddle.hints.length) {
                document.getElementById('hint-btn').innerText = "אין רמזים נוספים";
            }
        }
    }

    function checkAnswer() {
        const userAns = document.getElementById('answer-input').value.trim();
        const correctAns = riddles[currentIdx].answer;
        if (userAns === correctAns) {
            showExplanation("כל הכבוד! תשובה נכונה", currentRiddlePoints);
        } else {
            alert("תשובה לא נכונה, נסו שוב.");
        }
    }

    function skipRiddle() {
        showExplanation("דילגת על החידה", 0);
    }

    function showExplanation(status, points) {
        document.getElementById('menu-modal').style.display = 'none';
        totalScore += points;
        document.getElementById('exp-status').innerText = status;
        document.getElementById('exp-text').innerText = riddles[currentIdx].explanation;
        document.getElementById('riddle-points').innerText = points;
        document.getElementById('accumulated-score').innerText = totalScore;
        document.getElementById('explanation-modal').style.display = 'block';
    }

    function nextRiddle() {
        currentIdx++;
        closeModals();
        if (currentIdx < riddles.length) {
            loadRiddle();
        } else {
            document.getElementById('game-container').style.backgroundImage = "url('6.png')";
            document.getElementById('click-overlay').onclick = showFinalScore;
        }
    }

    function showFinalScore() {
        document.getElementById('exp-status').innerText = "מזל טוב! סיימת את המשחק";
        document.getElementById('exp-text').innerText = `צברת סך הכל ${totalScore} נקודות. יובל שמח להלל!`;
        document.getElementById('p-riddle-score').style.display = 'none';
        const nextBtn = document.getElementById('next-btn-text');
        nextBtn.innerText = "שחק שוב";
        nextBtn.onclick = () => location.reload();
        document.getElementById('explanation-modal').style.display = 'block';
    }

    window.onload = initGame;
</script>

</body>
</html>

